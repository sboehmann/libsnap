<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>libsnap &mdash; libsnap API Documentation</title>
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
    <script type="text/javaScript" src="search/search.js"></script>
    <link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <link href="doxygen_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body style="margin: 0; padding: 0;" onload='searchBox.OnSelectItem(0);'>
<div>
  <h1><a href='http://hilefoks.github.com/libsnap/' title="libsnap is a portable open-source S.N.A.P implementation" style="font-size: 1.5em; font-weight: bold; color: #0044b3; text-decoration: none;">libsnap</a></h1>
  <h2 style="text-align:center;">API Documentation</h2>
</div>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<h1>snap_allocator_t Struct Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="snap_allocator_t" -->
<p>Custom functions for memory handling.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="global_8h_source.html">global.h</a>&gt;</code></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsnap__allocator__t.html#ab9048e2f3391f9070e0009ee1b5926d3">alloc</a> )(size_t size, long <a class="el" href="structsnap__allocator__t.html#af3a59beddeb83431db94788a493b4f72">opaque</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pointer to a custom memory allocation function.  <a href="#ab9048e2f3391f9070e0009ee1b5926d3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsnap__allocator__t.html#a32059cd03027dea1a4e552dd776241d1">free</a> )(void *ptr, long <a class="el" href="structsnap__allocator__t.html#af3a59beddeb83431db94788a493b4f72">opaque</a>)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pointer to a custom memory freeing function.  <a href="#a32059cd03027dea1a4e552dd776241d1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsnap__allocator__t.html#af3a59beddeb83431db94788a493b4f72">opaque</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Custom data passed to .<a class="el" href="structsnap__allocator__t.html#ab9048e2f3391f9070e0009ee1b5926d3" title="Pointer to a custom memory allocation function.">alloc()</a> and .<a class="el" href="structsnap__allocator__t.html#a32059cd03027dea1a4e552dd776241d1" title="Pointer to a custom memory freeing function.">free()</a>.  <a href="#af3a59beddeb83431db94788a493b4f72"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Custom functions for memory handling. </p>
<p>A pointer to <a class="el" href="structsnap__allocator__t.html" title="Custom functions for memory handling.">snap_allocator_t</a> may be passed via <a class="el" href="structsnap__t.html" title="This is the base structure to handle the S.N.A.P protocol.">snap_t</a> structure to libsnap, and some advanced functions take a pointer to <a class="el" href="structsnap__allocator__t.html" title="Custom functions for memory handling.">snap_allocator_t</a> as a separate function argument. The library will use the functions specified in <a class="el" href="structsnap__allocator__t.html" title="Custom functions for memory handling.">snap_allocator_t</a> for memory handling instead of the default malloc() and <a class="el" href="structsnap__allocator__t.html#a32059cd03027dea1a4e552dd776241d1" title="Pointer to a custom memory freeing function.">free()</a>. C++ users should note that the custom memory handling functions must not throw exceptions.</p>
<p>libsnap doesn't make an internal copy of <a class="el" href="structsnap__allocator__t.html" title="Custom functions for memory handling.">snap_allocator_t</a>. Thus, it is OK to change these function pointers in the middle of the coding process, but obviously it must be done carefully to make sure that the replacement `free' can deallocate memory allocated by the earlier `alloc' function(s). </p>

<p>Definition at line <a class="el" href="global_8h_source.html#l00229">229</a> of file <a class="el" href="global_8h_source.html">global.h</a>.</p>
<hr/><h2>Field Documentation</h2>
<a class="anchor" id="ab9048e2f3391f9070e0009ee1b5926d3"></a><!-- doxytag: member="snap_allocator_t::alloc" ref="ab9048e2f3391f9070e0009ee1b5926d3" args=")(size_t size, long opaque)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void*(* <a class="el" href="structsnap__allocator__t.html#ab9048e2f3391f9070e0009ee1b5926d3">alloc</a>)(size_t size, long <a class="el" href="structsnap__allocator__t.html#af3a59beddeb83431db94788a493b4f72">opaque</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pointer to a custom memory allocation function. </p>
<p>If you don't want a custom allocator, but still want custom <a class="el" href="structsnap__allocator__t.html#a32059cd03027dea1a4e552dd776241d1" title="Pointer to a custom memory freeing function.">free()</a>, set this to NULL and libsnap will use the standard malloc().</p>
<dl class="note"><dt><b>Note:</b></dt><dd>The allocator should not waste time zeroing the allocated buffers. This is not only about speed, but also memory usage, since the operating system kernel doesn't necessarily allocate the requested memory in physical memory until it is actually used.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>Size of an element in bytes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>opaque</em>&nbsp;</td><td><a class="el" href="structsnap__allocator__t.html#af3a59beddeb83431db94788a493b4f72" title="Custom data passed to .alloc() and .free().">snap_allocator_t.opaque</a> (see below)</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Pointer to the beginning of a memory block of `size' bytes, or NULL if allocation fails for some reason. </dd></dl>

<p>Definition at line <a class="el" href="global_8h_source.html#l00249">249</a> of file <a class="el" href="global_8h_source.html">global.h</a>.</p>

</div>
</div>
<a class="anchor" id="a32059cd03027dea1a4e552dd776241d1"></a><!-- doxytag: member="snap_allocator_t::free" ref="a32059cd03027dea1a4e552dd776241d1" args=")(void *ptr, long opaque)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* <a class="el" href="structsnap__allocator__t.html#a32059cd03027dea1a4e552dd776241d1">free</a>)(void *ptr, long <a class="el" href="structsnap__allocator__t.html#af3a59beddeb83431db94788a493b4f72">opaque</a>)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pointer to a custom memory freeing function. </p>
<p>If you don't want a custom freeing function, but still want a custom allocator, set this to NULL and libsnap will use the standard <a class="el" href="structsnap__allocator__t.html#a32059cd03027dea1a4e552dd776241d1" title="Pointer to a custom memory freeing function.">free()</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ptr</em>&nbsp;</td><td>Pointer returned by snap_allocator.alloc(), or when it is set to NULL, a pointer returned by the standard malloc(). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>opaque</em>&nbsp;</td><td><a class="el" href="structsnap__allocator__t.html#af3a59beddeb83431db94788a493b4f72" title="Custom data passed to .alloc() and .free().">snap_allocator_t.opaque</a> (see below) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="global_8h_source.html#l00261">261</a> of file <a class="el" href="global_8h_source.html">global.h</a>.</p>

</div>
</div>
<a class="anchor" id="af3a59beddeb83431db94788a493b4f72"></a><!-- doxytag: member="snap_allocator_t::opaque" ref="af3a59beddeb83431db94788a493b4f72" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="structsnap__allocator__t.html#af3a59beddeb83431db94788a493b4f72">opaque</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Custom data passed to .<a class="el" href="structsnap__allocator__t.html#ab9048e2f3391f9070e0009ee1b5926d3" title="Pointer to a custom memory allocation function.">alloc()</a> and .<a class="el" href="structsnap__allocator__t.html#a32059cd03027dea1a4e552dd776241d1" title="Pointer to a custom memory freeing function.">free()</a>. </p>
<p>opaque is passed as the first argument to <a class="el" href="structsnap__allocator__t.html#ab9048e2f3391f9070e0009ee1b5926d3" title="Pointer to a custom memory allocation function.">snap_allocator_t.alloc()</a> and <a class="el" href="structsnap__allocator__t.html#a32059cd03027dea1a4e552dd776241d1" title="Pointer to a custom memory freeing function.">snap_allocator_t.free()</a>. This intended to ease implementing custom memory allocation functions for use with libsnap. </p>

<p>Definition at line <a class="el" href="global_8h_source.html#l00270">270</a> of file <a class="el" href="global_8h_source.html">global.h</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>libsnap/<a class="el" href="global_8h_source.html">global.h</a></li>
</ul>
</div>
    <hr size="1"/>
    <div align=right>S.N.A.P Library API Reference | Generated Wed Sep 29 2010 08:03:58 by Doxygen 1.7.1</div>
  </body>
</html>
